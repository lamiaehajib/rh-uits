<?php
// تأكدي أن هذا المسار صحيح للوصول لمكتبات الملحن
require __DIR__ . '/vendor/autoload.php';

use Rats\Zkteco\Lib\ZKTeco;

// IP العام الخاص بمكتبكم في تيط مليل
$ip = '105.159.223.93';
$port = 4370;

$zk = new ZKTeco($ip, $port);

echo "--- محاولة الاتصال بجهاز البصمة (F18) ---\n";

if ($zk->connect()) {
    echo "✅ مبروك! نجح الاتصال من حاسوبك المحلي إلى جهاز المكتب.\n";
    echo "وقت الجهاز: " . $zk->getTime() . "\n";
    
    // محاولة جلب المستخدمين للتأكد من البيانات
    $users = $zk->getUser();
    echo "عدد الموظفين المسجلين في الجهاز: " . count($users) . "\n";
    
    $zk->disconnect();
} else {
    echo "❌ فشل الاتصال. تأكدي أن الروتر مازال مشغلاً وأن القاعدة مفعلة.\n";
}


